## 时钟

### 前提知识

#### 概念区分

区分Linux中的时钟和时钟源概念 

- 时钟源： 泛指系统中用于提供系统时钟(tick)的硬件，比如不同体系架构下提供的timer， arm的generic timer 和 percpu timer，和系统时钟、调度等依靠timer驱动的功能息息相关

- 时钟：这里的时钟 我们一般用于指 时钟信号的控制，比如在一个SOC内部有很多器件，譬如CPU、串口、DRAM控制器，GPIO等内部外设，这些东西要彼此协调工作，需要一个同步的时钟系统来指挥， 我们常说的 CPU 主频 是 1Ghz 指的就是这个时钟频率
  
  我们在这章节主要涉及的是 **时钟** 这个概念

#### 硬件设计

SOC时钟一般可以有三种方式获得

- 外部直接输入时钟信号，SOC有一个引脚用来输入外部时钟信号，用的很少

- 外部晶振+内部时钟发生器产生时钟，大部分低频单片机这么工作

- 外部晶振+内部时钟发生器+内部PLL产生高频时钟+内部分频器分频得到各种频率的时钟



!!! Note

       

    问：为什么不用外部高频晶振产生高频率信号直接给cpu？
    答：主要是因为芯片外部电路不适宜使用高频率，因为传到辐射比较难控制：高频率的晶振太贵了。
    问: 为什么要内部先高频，然后再分频？
    答：主要因为SOC内部有很多部件都需要时钟，而且各自需要的时钟频率不同，没法统一供应，
    因此设计思路是PLL后先得到一个最高的频率(1GHZ、1.2GHZ），然后各个外设都有自己的分频器再分频得到自己想要的频率。
    


